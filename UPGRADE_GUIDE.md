# AKShare 股票数据插件升级指南

## 从版本0.5.0升级到0.5.1

### 🎯 **完全向后兼容**

版本0.5.1完全向后兼容版本0.5.0，所有基于0.5.0版本创建的Dify工作流和ChatFlow都可以直接使用，无需任何修改。

### 📋 **升级内容**

#### **新增功能**
1. **新增工具**：
   - `stock_hk_data` - 港股数据工具
   - `stock_us_data` - 美股数据工具

2. **功能增强**：
   - 个股综合技术指标工具功能完善
   - 美股工具参数分离(symbol/category)
   - 沪深港通资金流向接口迁移

#### **保持不变的功能**
- ✅ 所有0.5.0版本的工具接口保持不变
- ✅ 所有工具名称和参数名称保持不变
- ✅ 所有工具的输出格式保持不变
- ✅ 所有工具的功能逻辑保持不变

### 🔄 **工具映射关系**

| 0.5.0版本工具 | 0.5.1版本状态 | 说明 |
|---------------|---------------|------|
| stock_market_summary | ✅ 保持不变 | 股票市场总貌 |
| stock_individual_info_summary | ✅ 保持不变 | 个股信息总貌 |
| stock_spot_quotations | ✅ 保持不变 | 股票实时行情 |
| stock_hist_quotations | ✅ 保持不变 | 股票历史行情 |
| stock_hsgt_holdings | ✅ 保持不变 | 沪深港通持股 |
| stock_fund_flow_analysis | ✅ 保持不变 | 资金流向分析 |
| stock_financial_analysis | ✅ 保持不变 | 股票财务数据分析 |
| stock_technical_analysis | ✅ 保持不变 | 股票技术分析 |
| stock_comprehensive_technical_indicators | ✅ 保持不变 | 个股综合技术指标 |
| stockdata_em | ➡️ 已整合 | 功能已整合到其他工具中 |

### 📊 **接口迁移说明**

#### **stockdata_em工具接口迁移**
原`stockdata_em`工具中的接口已按功能分类迁移到相应的专业工具中：

| 原接口 | 迁移到工具 | 说明 |
|--------|------------|------|
| stock_bid_ask_em | stock_individual_info_summary | 个股信息总貌 |
| 其他接口 | 相应专业工具 | 按功能分类 |

### 🚀 **升级步骤**

1. **卸载旧版本**：
   - 在Dify中卸载AKShare股票数据插件0.5.0版本

2. **安装新版本**：
   - 下载并安装AKShare股票数据插件0.5.1版本

3. **验证兼容性**：
   - 所有基于0.5.0版本的工作流和ChatFlow将自动识别新版本
   - 无需修改任何工作流配置
   - 所有功能保持原有行为
   - 所有ChatFlow都可以直接使用

### ⚠️ **注意事项**

1. **工具顺序**：新版本保持了0.5.0版本的工具顺序，确保工作流识别正确
2. **参数兼容**：所有工具的参数名称和类型保持不变
3. **输出格式**：所有工具的输出格式保持不变
4. **ChatFlow兼容**：所有基于0.5.0版本的ChatFlow都可以直接使用
5. **错误处理**：增强了错误处理，但错误格式保持兼容

### 🎉 **升级优势**

- ✅ **零修改升级**：现有工作流和ChatFlow无需任何修改
- ✅ **功能增强**：获得更多数据接口和功能
- ✅ **性能优化**：更好的错误处理和性能
- ✅ **新功能**：可以使用新增的港股和美股数据工具
- ✅ **完全兼容**：所有0.5.0版本的内容都可以直接使用

### 📞 **技术支持**

如果在升级过程中遇到任何问题，请：
1. 检查Dify日志中的错误信息
2. 确认插件版本为0.5.1
3. 联系技术支持：sxxiefg@163.com

---

**升级完成后，您将获得版本0.5.1的所有新功能，同时保持与现有工作流和ChatFlow的完全兼容性。**
